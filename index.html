<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Home ¬∑ Maine Hindu Temple</title>
  <link rel="preconnect" href="https://countapi.mileshilliard.com">
  <link rel="stylesheet" href="styles.css" />

  <style>
    /* =================== Design tokens =================== */
    :root{
      /* Colors */
      --bg: #fffef9;
      --fg: #1e1e1e;
      --brand: #b89c3d;
      --muted: #6b7280;
      --card: #ffffff;
      --accent-bg: #fff7dc;

      /* Spacing (8px base) */
      --space-1: .5rem;   /* 8px  */
      --space-2: 1rem;    /* 16px */
      --space-3: 1.5rem;  /* 24px */
      --space-4: 2rem;    /* 32px */
      --radius: 16px;
      --shadow-1: 0 2px 6px rgba(0,0,0,.08);
      --shadow-2: 0 6px 16px rgba(0,0,0,.12);

      /* Fluid type */
      --fs-sm: clamp(.9rem, .85rem + .2vw, 1rem);
      --fs-base: clamp(1rem, .9rem + .5vw, 1.125rem);
      --fs-h3: clamp(1.125rem, 1rem + .9vw, 1.375rem);
      --fs-h2: clamp(1.375rem, 1.2rem + 1.2vw, 1.75rem);
      --fs-h1: clamp(1.75rem, 1.4rem + 2vw, 2.5rem);

      /* Container */
      --container: 1100px;
    }

    /* =================== Base + layout =================== */
    *,
    *::before,
    *::after { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; }
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans", Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
      font-size: var(--fs-base);
      line-height: 1.6;
    }
    img{ max-width: 100%; height: auto; display: block; }
    a{ color: inherit; text-decoration: none; }
    .container{ width: 100%; max-width: var(--container); margin: 0 auto; padding: 0 var(--space-2); }

    /* =================== Navigation =================== */
    .nav{ position: sticky; top: 0; background: var(--card); box-shadow: var(--shadow-1); z-index: 10; }
    .nav .inner{ display:flex; align-items:center; justify-content:space-between; gap: var(--space-2); padding: var(--space-2) 0; }

    .brand img{ width: 220px; height:auto; border-radius: 8px; display:block; }
    .brand div{ display:none; }

    /* Mobile-friendly horizontal scroll menu (no JS) */
    .menu{
      display:flex; gap: var(--space-2); overflow-x:auto; padding: .25rem 0;
      scrollbar-width: none;
    }
    .menu::-webkit-scrollbar{ display:none; }
    .menu a{
      padding: .5rem .75rem; border-radius: 999px; white-space: nowrap; color: var(--muted);
    }
    .menu a.active, .menu a:hover{ background: var(--accent-bg); color: var(--fg); }

    /* =================== Hero =================== */
    .hero{ padding: var(--space-4) 0 var(--space-3); text-align: center; }
    .badge{
      display:inline-block; background: var(--accent-bg); color: var(--brand);
      padding:.25rem .75rem; border-radius: 999px; font-weight:600; font-size: var(--fs-sm);
    }
    .hero h1{ font-size: var(--fs-h1); margin: var(--space-2) 0; }
    .hero p{ color: var(--muted); max-width: 60ch; margin: 0 auto var(--space-2); }
    .cta{
      display:inline-block; padding:.75rem 1rem; border-radius: 999px; background: var(--brand); color: #fff; font-weight:700;
      box-shadow: var(--shadow-1);
    }
    .cta:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); }

    /* =================== Grid & Cards =================== */
    .grid{
      display:grid; gap: var(--space-2);
      grid-template-columns: 1fr; /* mobile-first */
      margin: var(--space-3) 0 var(--space-4);
    }
    .card{
      background: var(--card); border-radius: var(--radius); padding: var(--space-3);
      box-shadow: var(--shadow-1);
    }
    .card h3{ font-size: var(--fs-h3); margin-top: 0; }
    .card p{ color: var(--muted); }

    @media (min-width: 700px){
      .brand img{ width: 260px; }
      .grid{ grid-template-columns: repeat(2, 1fr); }
    }
    @media (min-width: 1000px){
      .brand img{ width: 300px; }
      .grid{ grid-template-columns: repeat(3, 1fr); }
    }

    /* =================== Visitor counter banner =================== */
    #visitor-counter{
      margin-top: 15px; width:100%; overflow:hidden; background: var(--accent-bg);
      border-radius: 30px; box-shadow: var(--shadow-1); padding: 8px 0; text-align:center;
    }
    .marquee-content{
      display:inline-flex; align-items:center; gap:10px; font-weight:700; font-size: var(--fs-sm);
      color: var(--brand); white-space:nowrap; animation: marquee 12s linear infinite;
    }
    #visitor-counter:hover .marquee-content{ animation-play-state: paused; }
    @keyframes marquee{ 0%{ transform:translateX(100%);} 100%{ transform:translateX(-100%);} }
    #visitor-counter svg{ width:20px; height:20px; fill: var(--brand); }

    /* =================== Footer =================== */
    .footer{ text-align:center; padding: var(--space-4) 0; color: var(--muted); }
    #footer-counter{
      font-weight: 700; color: var(--brand); background: var(--accent-bg);
      border-radius: 25px; display:inline-flex; align-items:center; gap: 6px; justify-content:center;
      padding: 6px 12px; margin-top: 10px; box-shadow: var(--shadow-1);
    }
    #footer-counter svg{ width:16px; height:16px; fill: var(--brand); }
  </style>
</head>

<body>

  <!-- Navigation -->
  <nav class="nav">
    <div class="inner container">
      <div class="brand">
        <img src="mht.jpg" alt="MHT Logo">
      </div>
      <div class="menu">
        <a href="index.html" class="active">Home</a>
        <a href="about.html">About</a>
        <a href="events.html">Events</a>
        <a href="gallery.html">Gallery</a>
        <a href="volunteer.html">Volunteer</a>
        <a href="donate.html">Donate</a>
        <a href="contact.html">Contact</a>
        <a href="report.html">Report2025</a>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <header class="hero container">
    <span class="badge">SanƒÅtana Dharma ¬∑ ‡§∏‡§§‡•ç‡§Ø‡§Ç ‡§∂‡§ø‡§µ‡§Ç ‡§∏‡•Å‡§Ç‡§¶‡§∞‡§Æ‡•ç</span>
    <h1>Welcome to Maine Hindu Temple</h1>

    <!-- Scrolling Visitor Counter -->
    <div id="visitor-counter" class="marquee">
      <div class="marquee-content">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8a8.009 8.009 0 0 1-8 8zm1-13h-2v6l5.25 3.15l1-1.63L13 12.75z"/>
        </svg>
        <strong>You are visitor #<span id="count">0</span> üéâ</strong>
      </div>
    </div>

    <p>MHT is a spiritual and cultural home for the Hindu community in Maine. Join us for weekly puja, festivals, and cultural programs.</p>
    <a class="cta" href="events.html">See Upcoming Events</a>
  </header>

  <!-- Main Content -->
  <main class="container">
    <div class="grid">
      <div class="card">
        <h3>Temple Timings</h3>
        <p>Mon‚ÄìFri: 6‚Äì8 PM ¬∑ Sat‚ÄìSun: 9 AM‚Äì1 PM &amp; 5‚Äì8 PM</p>
        <a class="cta" href="contact.html">Plan Your Visit</a>
      </div>
      <div class="card">
        <h3>Support the Temple</h3>
        <p>Your contributions sustain daily puja, festivals, and community programs.</p>
        <a class="cta" href="donate.html">Donate</a>
      </div>
      <div class="card">
        <h3>Volunteer</h3>
        <p>Help with events, prasadam, operations, and youth activities.</p>
        <a class="cta" href="volunteer.html">Sign Up</a>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <div class="footer container">
    <div><strong>Maine Hindu Temple</strong></div>
    <div>719 Main St, Westbrook, ME 04092 ¬∑ Phone: (207) 370-0475</div>
    <div>¬© <span id="year"></span> Maine Hindu Temple ¬∑ All rights reserved.</div>

    <!-- Footer Visitor Counter -->
    <div id="footer-counter" aria-live="polite">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M12 2a10 10 0 1 0 10 10A10.011 10.011 0 0 0 12 2zm0 18a8 8 0 1 1 8-8a8.009 8.009 0 0 1-8 8zm1-13h-2v6l5.25 3.15l1-1.63L13 12.75z"/>
      </svg>
      <strong>Visitor Count: <span id="footer-count">0</span></strong>
    </div>
  </div>

  <!-- Scripts -->
  <script>
    // Dynamic year
    document.getElementById('year').textContent = new Date().getFullYear();

    /**
     * Unique-by-browser global counter (no backend):
     * - Each browser gets a random UUID saved in localStorage.
     * - We store a "seen" key in a public KV (CountAPI clone) per UUID.
     * - If it's the first time this UUID is seen globally -> increment main counter.
     * - Else -> just read main counter.
     *
     * Notes:
     * - If an ad/tracker blocker blocks the countapi domain, the UI will remain 0.
     *   You can optionally hide the banner in the catch() block.
     */

    // ---- Config ----
    const COUNTER_BASE = 'https://countapi.mileshilliard.com/api/v1'; // maintained CountAPI clone
    const MAIN_COUNTER_KEY = 'mainehindutemple.net/home';            // global total for Home
    const UID_STORAGE_KEY = 'mht_uid_v1';                             // local UUID key
    const SEEN_PREFIX = 'mht-seen-uid-';                              // remote "seen" keys

    // ---- CountAPI helpers ----
    async function hit(key) {
      const res = await fetch(`${COUNTER_BASE}/hit/${encodeURIComponent(key)}`, { cache: 'no-store' });
      if (!res.ok) throw new Error('hit failed');
      return res.json(); // { value: number }
    }

    async function get(key) {
      const res = await fetch(`${COUNTER_BASE}/get/${encodeURIComponent(key)}`, { cache: 'no-store' });
      if (!res.ok) throw new Error('get failed');
      return res.json(); // { value: number }
    }

    function updateUI(total) {
      const n = Number(total || 0);
      document.getElementById('count').textContent = n.toLocaleString();
      document.getElementById('footer-count').textContent = n.toLocaleString();
    }

    (async function initVisitorCount() {
      try {
        // 1) Ensure a persistent per-browser UUID
        let uid = localStorage.getItem(UID_STORAGE_KEY);
        if (!uid) {
          if (crypto && crypto.randomUUID) {
            uid = crypto.randomUUID();
          } else {
            uid = Math.random().toString(36).slice(2) + Date.now().toString(36);
          }
          localStorage.setItem(UID_STORAGE_KEY, uid);
        }

        const seenKey = SEEN_PREFIX + uid;

        // 2) First time UUID seen globally -> increment main; else -> read main
        let total;
        try {
          const seen = await hit(seenKey);
          if (Number(seen.value) === 1) {
            const main = await hit(MAIN_COUNTER_KEY);
            total = main.value;
          } else {
            const main = await get(MAIN_COUNTER_KEY);
            total = main.value;
          }
        } catch (e) {
          // fallback: try to read main; if blocked, leave 0 or hide
          const main = await get(MAIN_COUNTER_KEY);
          total = main.value;
        }

        updateUI(total);
      } catch (err) {
        console.error('Visitor counter failed:', err);
        // Optional: hide the banner if unreachable
        // document.getElementById('visitor-counter').style.display = 'none';
      }
    })();
  </script>

</body>
</html>
